{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { firestore } from 'firebase/app';\nimport * as _ from 'lodash';\nimport { EditModalContentComponent } from './edit-modal-content/edit-modal-content.component';\nlet EditButtonComponent = class EditButtonComponent {\n  constructor(modalService, toastrService, // private authService: AuthService,\n  afs, router) {\n    this.modalService = modalService;\n    this.toastrService = toastrService;\n    this.afs = afs;\n    this.router = router;\n    this.isNew = false;\n    this.posts = [];\n    this.inputsConfig = {};\n    this.createText = 'Create';\n    this.editText = 'Edit';\n  }\n\n  ngOnInit() {\n    // this.authService.user$.subscribe(user => {\n    //   this.user = user\n    if (_.isEqual(this.collection, 'blog')) {\n      // Converting string dates to date type\n      this.data.created = _.get(this.data, ['created']) || firestore.Timestamp.fromDate(new Date());\n      this.data.modified = _.get(this.data, ['modified']) || firestore.Timestamp.fromDate(new Date()); // Initializing UID, Full Name, Photo URL\n\n      this.data.uid = _.get(this.data, ['uid']) || _.get(this.user, ['uid']);\n      this.data.displayName = _.get(this.data, ['displayName']) || _.get(this.user, ['displayName']);\n      this.data.photoURL = _.get(this.data, ['photoURL']) || _.get(this.user, ['photoURL']);\n    } // });\n\n  }\n\n  open() {\n    const modalOptions = {\n      backdrop: 'static',\n      keyboard: false,\n      windowClass: 'modal-100'\n    };\n    const modalRef = this.modalService.open(EditModalContentComponent, modalOptions);\n    modalRef.componentInstance.collection = this.collection;\n    modalRef.componentInstance.id = this.id;\n    modalRef.componentInstance.data = _.assign({}, this.data);\n    modalRef.componentInstance.isNew = this.isNew;\n    modalRef.componentInstance.posts = this.posts;\n    modalRef.componentInstance.inputsConfig = this.inputsConfig;\n    modalRef.result.then(result => {\n      if (_.isEqual(this.collection, 'products')) {\n        result.data.modified = firestore.Timestamp.fromDate(new Date());\n      }\n\n      if (_.isEqual(result.reason, 'delete') && _.isEqual(this.collection, 'products')) {\n        this.afs.collection(this.collection).doc(this.id).delete().then(success => {\n          this.toastrService.success(`Item has been deleted.`, 'Delete Success!');\n          this.router.navigate(['']);\n        }).catch(error => {\n          this.toastrService.warning(_.get(error, ['message']), _.get(error, ['code']));\n        });\n      } else if (_.isEqual(result.reason, 'create')) {\n        this.afs.collection(this.collection).doc(result.data.slug).set(_.assign({}, result.data)).then(success => {\n          this.toastrService.success(`Item has been created.`, 'Create Success!');\n        }).catch(error => {\n          this.toastrService.warning(_.get(error, ['message']), _.get(error, ['code']));\n        });\n      } else if (_.isEqual(result.reason, 'update')) {\n        this.afs.collection(this.collection).doc(this.id).update(_.assign({}, result.data)).then(success => {\n          this.toastrService.success(`Item has been updated.`, 'Update Success!');\n        }).catch(error => {\n          this.toastrService.warning(_.get(error, ['message']), _.get(error, ['code']));\n        });\n      }\n    }, reason => {});\n  }\n\n};\n\n__decorate([Input()], EditButtonComponent.prototype, \"collection\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"id\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"data\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"isNew\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"posts\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"inputsConfig\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"createText\", void 0);\n\n__decorate([Input()], EditButtonComponent.prototype, \"editText\", void 0);\n\nEditButtonComponent = __decorate([Component({\n  selector: 'app-edit-button',\n  templateUrl: './edit-button.component.html',\n  styleUrls: ['./edit-button.component.scss']\n})], EditButtonComponent);\nexport { EditButtonComponent };","map":null,"metadata":{},"sourceType":"module"}